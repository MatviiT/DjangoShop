{% extends "base.html" %}
{% block content %}

<div class="topbar">
  <h1>Apple Shop</h1>

  <div class="currency">
    <a class="{% if currency == 'UAH' %}active{% endif %}" href="{% url 'shop:set_currency' 'UAH' %}">₴</a>
    <a class="{% if currency == 'USD' %}active{% endif %}" href="{% url 'shop:set_currency' 'USD' %}">$</a>
    <a class="{% if currency == 'EUR' %}active{% endif %}" href="{% url 'shop:set_currency' 'EUR' %}">€</a>
    <span style="opacity:.7;">{{ currency }}</span>
  </div>
</div>

<div class="grid">
  {% for p in products %}
    <div class="card">
      <a href="{{ p.get_absolute_url }}">
        <h3>{{ p.name }}</h3>
        {% if p.image %}
        <img src="{{ p.image.url }}" alt="{{ p.name }}" style="width:100%; height:180px; object-fit:contain;">
        {% else %}
        <div style="width:100%; height:180px; background:#f5f5f7; border-radius:12px;"></div>
        {% endif %}

      </a>

      <div class="price">
        {% if currency == "USD" %}
          {{ p.price_usd }} $
        {% elif currency == "EUR" %}
          {{ p.price_eur }} €
        {% else %}
          {{ p.price_uah }} ₴
        {% endif %}
      </div>

      {% if p.in_stock %}
        <span class="badge ok">В наявності</span>
      {% else %}
        <span class="badge no">Немає в наявності</span>
      {% endif %}
    </div>
  {% empty %}
    <p>Товарів немає</p>
  {% endfor %}
</div>

{% endblock %}
